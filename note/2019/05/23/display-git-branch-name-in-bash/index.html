<!DOCTYPE html>
<html lang="en-us">

  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    
    <title>
    Display Git Branch Name in Bash  - Kip Jiang
    </title>
    <meta property="og:title" content="Display Git Branch Name in Bash - Kip Jiang">
    
    
    
        
    
    
    
    <meta property="description" content="Three ways to show you git branch name">
    <meta property="og:description" content="Three ways to show you git branch name">
    
    
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/main.css" />
  </head>


  
  <body class="note">

    <div class="container" >
      <div class="main" role="main" >

        
  <header class="header">
      <h1 class="author" ><a href="/">Kip Jiang</a></h1>
  
  
    <p class="tagline">Do one thing, <!-- raw HTML omitted -->Do it well!</p>
  
    <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
    
    
      <li>
        <a href="/">Home</a>
      </li>
    
      <li>
        <a href="/about/">About</a>
      </li>
    
      <li>
        <a href="/post/">Posts</a>
      </li>
    
      <li>
        <a href="/note/">Notes</a>
      </li>
    
      <li>
        <a href="/categories/">Categories</a>
      </li>
    
      <li>
        <a href="/tags/">Tags</a>
      </li>
    
  </ul>
</nav>

  </header>


        <article class="article">
          
  
    <header class="title">
      <h1>Display Git Branch Name in Bash</h1>
      
      <h3>
      Kip
      
         &#183;  2019-05-23 &#183; Words: 121
      
      </h3>
      <hr>
    </header>
  

           
          
  
    <nav id="TableOfContents">
  <ul>
    <li><a href="#first">First</a></li>
    <li><a href="#second">Second</a></li>
    <li><a href="#third">Third</a></li>
  </ul>
</nav>  
  
  <div class="post-content" >
    <h2 id="first">First</h2>
<ol>
<li>将脚本下载到 Home 目录</li>
</ol>
<pre><code>$ git clone https://github.com/KipJiang/git-aware-prompt.git ~/git-aware-prompt
$ mv ~/git-aware-prompt ~/.git-aware-prompt
</code></pre><ol start="2">
<li>修改配置文件 <code>.bashrc</code></li>
</ol>
<pre><code>$ vim ~/.bashrc
</code></pre><p>添加如下内容</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cfg" data-lang="cfg"><span style="color:#75715e"># git branch function</span>
<span style="color:#a6e22e">export PS1</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;\${debian_chroot:+(\$debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\] \[$txtcyn\]\$git_branch\[$txtred\]\$git_dirty\[$txtrst\]\$&#34;</span>
<span style="color:#a6e22e">export GITAWAREPROMPT</span><span style="color:#f92672">=</span><span style="color:#e6db74">~/.git-aware-prompt</span>
<span style="color:#a6e22e">source &#34;${GITAWAREPROMPT}/main.sh&#34;</span>
</code></pre></div><ol start="3">
<li>使配置生效</li>
</ol>
<pre><code>$ source ~/.bashrc
</code></pre><ol start="4">
<li>效果</li>
</ol>
<p>Ubuntu</p>
<p><img src="/img/2019-05-23/ubuntu-git-color.png" alt="ubuntu-git-color"></p>
<p>CentOS</p>
<p><img src="/img/2019-05-23/centos-git-color.png" alt="centos-git&ndash;color"></p>
<h2 id="second">Second</h2>
<ol>
<li>编辑 <code>~/.bashrc</code>，添加如下内容</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cfg" data-lang="cfg"><span style="color:#75715e"># git branch function</span>
<span style="color:#a6e22e">function git_branch {</span>
   <span style="color:#a6e22e">branch</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;`git branch 2&gt;/dev/null | grep &#34;^\*&#34; | sed -e &#34;s/^\*\ //&#34;`&#34;
</span><span style="color:#e6db74">   if [ &#34;${branch}&#34; != &#34;&#34; ];then
</span><span style="color:#e6db74">       if [ &#34;${branch}&#34; = &#34;(no branch)&#34; ];then
</span><span style="color:#e6db74">           branch=&#34;(`git rev-parse --short HEAD`...)&#34;
</span><span style="color:#e6db74">       fi
</span><span style="color:#e6db74">       echo &#34; ($branch)&#34;
</span><span style="color:#e6db74">   fi</span>
<span style="color:#a6e22e">}</span>

<span style="color:#a6e22e">export PS1</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\u@\h \[\033[01;36m\]\W\[\033[01;32m\]$(git_branch)\[\033[00m\] \$ &#39;</span>
</code></pre></div><ol start="2">
<li>使配置生效</li>
</ol>
<pre><code>$ source ~/.bashrc
</code></pre><h2 id="third">Third</h2>
<ol>
<li>编辑 <code>~/.profile</code>，添加如下内容</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cfg" data-lang="cfg"><span style="color:#75715e"># git branch function</span>
<span style="color:#a6e22e">parse_git_branch() {</span>
     <span style="color:#a6e22e">git branch 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#39;s/* \(.*\)/ (\1)/&#39;</span>
<span style="color:#a6e22e">}</span>
<span style="color:#a6e22e">export PS1</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;\u@\h \[\033[32m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\] $ &#34;</span>
</code></pre></div><ol start="2">
<li>使配置生效</li>
</ol>
<pre><code>$ source ~/.profile
</code></pre>
  </div>

          <footer>
  
    <div class="post-footer" >
      
        <span class="post-categories">
          &#9900; <a href="https://KipJiang.github.io/categories/linux/"> Linux </a>
            
        </span>
      
      
        <span class="lastmodified">
          update @ 2020-03-25
        </span>
      
    </div>
  

  
  <nav class="post-nav">
    <span class="nav-prev">&larr; <a href="/about/">About</a></span>
    <span class="nav-next"><a href="/note/2019/11/07/vscode-remote-ssh/">Visual Studio Code: Remote-SSH</a> &rarr;</span>
  </nav>
  

  
    <div class="comments" >
      










  <div class="commemt-item" >
    <div class="valine" >
      <span id="/note/2019/05/23/display-git-branch-name-in-bash/" class="leancloud_visitors" data-flag-title="Display Git Branch Name in Bash">
          
          <span class="leancloud-visitors-count">0</span>
          <p></p>
        </span>
      <div id="vcomments"></div>
      <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
      <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
      <script type="text/javascript">
        new Valine({
            el: '#vcomments',
            appId: 'AhrO67kSBw2cdWp3AFKzjzI5-MdYXbMMI',
            appKey: 'RKBIhU7j518tpSUFbaWh8D2x',
            notify: 'true', 
            verify: 'true', 
            avatar: '', 
            placeholder: 'Say something... (please fill in the email to receive the reply)',
            visitor: 'true'
        });
      </script>
    </div>
  </div>


    </div>
  

  <script async src="/js/center-img.js"></script>
  <script src="/js/math-code.js"></script>
  <script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</footer>
        </article>

        <footer>
  
  
  

  
    <script src="//cdn.bootcss.com/highlight.js//highlight.min.js"></script>
    
    
    
    
    <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
  

  
    <hr>
    <div class="copyright">
      &copy; 2019 - 2020
      &#183; <a href="/">Kip Jiang</a> · <a href="https://github.com/KipJiang">Github</a> &#183; 
      <a href="https://KipJiang.github.io/index.xml" target="_blank" title="rss">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 22 20" fill="none" 
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss">
          <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
        </svg>
      </a>
    </div>
  
</footer>
        

      </div>
    </div>

  </body>
</html>